{% load static %}
<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="utf-8">
        <title>Accueil</title>
        <meta content="width=device-width, initial-scale=1.0" name="viewport">
        <meta content="" name="keywords">
        <meta content="" name="description">

        <!-- Google Web Fonts -->
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&family=Roboto:wght@400;500;700;900&display=swap" rel="stylesheet">

        <!-- Icon Font Stylesheet -->
   

        <link rel="stylesheet" href="{% static 'web_site/css/index.css' %}">

        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet">

        <!-- Libraries Stylesheet -->
        <link rel="stylesheet" href="{% static 'web_site/lib/animate/animate.min.css' %}">
        <link href="{% static 'web_site/lib/lightbox/css/lightbox.min.css' %}" rel="stylesheet">
        <link href="{% static 'web_site/lib/owlcarousel/assets/owl.carousel.min.css' %}" rel="stylesheet">


        <!-- Customized Bootstrap Stylesheet -->
        <link href="{% static 'web_site/css/bootstrap.min.css' %}" rel="stylesheet">

        <!-- Template Stylesheet -->
        <link href="{% static 'web_site/css/style.css' %}" rel="stylesheet">
    </head>

    <body>

        <!-- Spinner Start -->
        <div id="spinner" class="show bg-white position-fixed translate-middle w-100 vh-100 top-50 start-50 d-flex align-items-center justify-content-center">
            <div class="spinner-border text-primary" style="width: 3rem; height: 3rem;" role="status">
                <span class="sr-only">Loading...</span>
            </div>
        </div>
        <!-- Spinner End -->


        <!-- Navbar & Hero Start -->
        {% include 'web_site/navbar.html' %}
        <!-- Navbar & Hero End -->
         <!-- Carousel Start -->
  <div class="header-carousel owl-carousel">
    <div class="header-carousel-item">
    <img
      src="{% static 'web_site/img/slide2.jpg' %}"
      class="img-fluid"
      style="max-width: 100%; height: auto; display: block; margin: 0 auto;"
      alt="Image"
    />
      <div class="carousel-caption">
        <div class="container">
          <div class="row gy-0 gx-5">
            <div class="col-lg-0 col-xl-5"></div>
            <div class="col-xl-7 animated fadeInLeft">
              <div class="text-sm-center text-md-end">
                <h2 class="text-primary text-uppercase fw-bold mb-4">
                  Avec CISMAT PRINT,
                </h2>
                <h6 class="display-4 text-uppercase text-white mb-4">
                  vos projets prennent vie
                </h6>

              
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="header-carousel-item">
      <img
        src="{% static 'web_site/img/slide1.jpeg' %}"
        class="img-fluid w-100"
        alt="Image"
      />
      <div class="carousel-caption">
        <div class="container">
          <div class="row g-5">
            <div class="col-12 animated fadeInUp">
              <div class="text-center">
                <h2 class="text-primary text-uppercase fw-bold mb-4">
                  Avec CISMAT PRINT,
                </h2>
                <h1 class="display-4 text-uppercase text-white mb-4">
                   imprimez sans contrainte.
                </h1>
               
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="header-carousel-item">
      <img
        src="{% static 'web_site/img/slide3.jpg' %}"
        class="img-fluid w-100"
        alt="Image"
      />
      <div class="carousel-caption">
        <div class="container">
          <div class="row g-5">
            <div class="col-12 animated fadeInUp">
              <div class="text-center">
                <h2 class="text-primary text-uppercase fw-bold mb-4">
                  Avec CISMAT PRINT,
                </h2>
                <h1 class="display-4 text-uppercase text-white mb-4">
                    c'est la perfection à portée de main.
                </h1>
               
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- Carousel End -->

        <!-- Services Start -->
        <div class="container-fluid service pb-5">
            <div class="container pb-5">
                <div class="text-center mx-auto pb-5 wow fadeInUp" data-wow-delay="0.2s" style="max-width: 800px;">
                    {% comment %} <h4 class="text-primary">Our Services</h4> {% endcomment %}
                    <br>    </br>
                    <div class="services-header-bg py-5 px-3 mb-4 position-relative overflow-hidden">
                        <h1 class="display-5 mb-4 animated-title">Quelques Services</h1>
                        <p class="mb-0 services-header-desc">
                            De l'idée à l'impression, nous donnons vie à tous vos projets
                        </p>
                    </div>
                    <style>
                        .services-header-bg {
                            background: linear-gradient(120deg, #ff8c00 0%, #ffd580 100%);
                            border-radius: 1.5rem;
                            box-shadow: 0 8px 32px rgba(255, 140, 0, 0.15);
                            color: #2d2d2d;
                            text-align: center;
                            position: relative;
                            z-index: 1;
                        }
                        .services-header-bg::before {
                            content: "";
                            position: absolute;
                            top: -40px;
                            left: -40px;
                            width: 120px;
                            height: 120px;
                            background: rgba(255,255,255,0.15);
                            border-radius: 50%;
                            z-index: 0;
                            animation: float1 6s ease-in-out infinite;
                        }
                        .services-header-bg::after {
                            content: "";
                            position: absolute;
                            bottom: -40px;
                            right: -40px;
                            width: 100px;
                            height: 100px;
                            background: rgba(255,255,255,0.12);
                            border-radius: 50%;
                            z-index: 0;
                            animation: float2 7s ease-in-out infinite;
                        }
                        @keyframes float1 {
                            0%,100% { transform: translateY(0);}
                            50% { transform: translateY(20px);}
                        }
                        @keyframes float2 {
                            0%,100% { transform: translateY(0);}
                            50% { transform: translateY(-15px);}
                        }
                        .animated-title {
                            position: relative;
                            z-index: 1;
                            font-weight: 700;
                            color: #fff;
                            letter-spacing: 2px;
                            text-shadow: 0 2px 8px rgba(255,140,0,0.25);
                            animation: fadeInDown 1.2s cubic-bezier(.77,0,.18,1) both;
                        }
                        .services-header-desc {
                            font-size: 1.5rem;
                            font-weight: 500;
                            color: #2d2d2d;
                            position: relative;
                            z-index: 1;
                            animation: fadeInUp 1.2s cubic-bezier(.77,0,.18,1) 0.3s both;
                        }
                        @keyframes fadeInDown {
                            0% { opacity: 0; transform: translateY(-40px);}
                            100% { opacity: 1; transform: translateY(0);}
                        }
                        @keyframes fadeInUp {
                            0% { opacity: 0; transform: translateY(40px);}
                            100% { opacity: 1; transform: translateY(0);}
                        }
                    </style>
                    <script>
                        // Subtle text animation on scroll
                        document.addEventListener('DOMContentLoaded', function() {
                            const header = document.querySelector('.services-header-bg');
                            if(header){
                                window.addEventListener('scroll', function() {
                                    const scroll = window.scrollY;
                                    header.style.backgroundPosition = `center ${scroll * 0.1}px`;
                                });
                            }
                        });
                    </script>
                </div>
                <div class="row g-4">
                    {% for service, models in random_service_models.items %}
                    <h3>{{ service.titre }}</h3>
                    <ul class="list-unstyled row g-4 flex-md-row flex-lg-row flex-xl-row">
                        {% for model in models %}
                        <div class="col-md-6 col-lg-4 wow fadeInUp" data-wow-delay="0.2s">
                            <div class="service-item h-100 border border-2 rounded shadow-sm" style="min-height: 100%; display: flex; flex-direction: column;">
                                <div class="service-img" style="height: 220px; overflow: hidden; border-top-left-radius: .5rem; border-top-right-radius: .5rem;">
                                    <img src="{{ model.image.url }}" class="img-fluid rounded-top w-100 h-100 object-fit-cover" alt="Image" style="object-fit: cover; width: 100%; height: 100%;">
                                </div>
                                <div class="rounded-bottom p-4 d-flex flex-column flex-grow-1">
                                    <a href="#" class="h4 d-inline-block mb-4">{{ model.nom }}</a>
                                    <p class="mb-4 flex-grow-1">
                                        {{ model.description|truncatewords:20 }}
                                        {% if model.description|length > 20 %}
                                            <span class="model-desc-rest d-none">{{ model.description|slice:"20:" }}</span>
                                            <a href="#" class="ms-2 text-primary voir-plus-link" style="font-weight: 500; cursor:pointer;">voir plus</a>
                                        {% endif %}
                                    </p>
                                    <div class="mt-auto">
                                        <a class="btn btn-secondary rounded-pill py-2 px-4" href="{% url 'savoir_plus' service.id %}?model_id={{ model.id }}&from=index" style="background-color: #007bff; border-color: #007bff; color: #fff;">
                                            Détails
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        {% endfor %}
                    </ul>
                    {% endfor %}
                    <div class="text-center my-4">
                        <a class="btn btn-primary rounded-pill py-3 px-5 shadow-lg see-all-btn" href="{% url 'all_service' %}">
                            <i class="fas fa-th-list me-2"></i>Voir tous les services
                        </a>
                    </div>
                    <style>
                        .see-all-btn {
                            font-size: 1.2rem;
                            letter-spacing: 1px;
                            transition: background 0.3s, color 0.3s, transform 0.2s;
                            background: linear-gradient(90deg,rgb(255, 140, 0) 0%,rgb(255, 140, 0) 100%);
                            border: none;
                            box-shadow: 0 4px 20px rgb(255, 140, 0);
                        }
                        .see-all-btn:hover, .see-all-btn:focus {
                            background: linear-gradient(90deg,rgb(255, 140, 0) 0%,rgb(255, 140, 0) 100%);
                            color: #fff;
                            transform: translateY(-3px) scale(1.04);
                            box-shadow: 0 8px 32px rgb(255, 140, 0);
                            text-decoration: none;
                        }
                        .service-item {
                            border: 2px solid #ff8c00 !important;
                            border-radius: 1rem !important;
                            min-height: 100%;
                            background: #fff;
                            transition: box-shadow 0.2s, border-color 0.2s;
                            display: flex;
                            flex-direction: column;
                        }
                        .service-item:hover {
                            box-shadow: 0 8px 32px rgba(255, 140, 0, 0.15);
                            border-color: #ffa500 !important;
                        }
                        .service-img img {
                            object-fit: cover;
                            width: 100%;
                            height: 100%;
                            min-height: 220px;
                            max-height: 220px;
                        }
                    </style>
                    <script>
                        // Subtle button animation on click
                        document.addEventListener('DOMContentLoaded', function() {
                            const btn = document.querySelector('.see-all-btn');
                            if(btn){
                                btn.addEventListener('mousedown', function() {
                                    btn.style.transform = 'scale(0.97)';
                                });
                                btn.addEventListener('mouseup', function() {
                                    btn.style.transform = '';
                                });
                                btn.addEventListener('mouseleave', function() {
                                    btn.style.transform = '';
                                });
                            }
                        });
                    </script>
                </div>
            </div>
        </div>
        <!-- Services End -->


        <!-- Blog Start -->
        <div class="container-fluid blog pb-5">
            <div class="container py-5">
                <div class="text-center mx-auto pb-5 wow fadeInUp" data-wow-delay="0.2s" style="max-width: 800px;">
                    <h1 class="display-5 mb-4">Nos réalisations en images</h1>
                    <p class="mb-0">Du petit au grand format, découvrez l’essence de notre savoir-faire : des impressions soignées pour des résultats résolument professionnels.</p>
                </div>
            </div>
            <div class="owl-carousel blog-carousel wow fadeInUp" data-wow-delay="0.2s">
                {% for realisation in realisations %}
                <div class="blog-item p-4">
                    <div class="blog-img mb-4">
                        <img src="{{ realisation.image_principale.url }}" class="img-fluid w-100 rounded" alt="{{ realisation.titre }}" style="height: 260px; object-fit: cover; object-position: center;">
                        <div class="blog-title">
                            <a class="btn">{{ realisation.titre }}</a>
                        </div>
                    </div>
                    {# Affichage du sous-titre si présent, sinon rien #}
                    {% if realisation.soustitre %}
                        <a href="#" class="h4 d-inline-block mb-3">{{ realisation.soustitre }}</a>
                    {% endif %}
                    <p class="mb-4">{{ realisation.description }}</p>
                </div>
                {% endfor %}
            </div>
        </div>
        <!-- Blog End -->


        <!-- Team Start -->
        <div class="container-fluid team pb-5">
            <div class="container pb-5">
                <div class="text-center mx-auto pb-5 wow fadeInUp" data-wow-delay="0.2s" style="max-width: 850px;">
                    <h1 class="display-5 mb-3">
                        Notre équipe
                    </h1>
                    <p>
                        Derrière <span class="fw-bold text-primary">CISMAT PRINT</span>, une équipe passionnée et dévouée met tout en œuvre pour réaliser vos projets d'impression.
                    </p>
                    <style>
                        .team-header-bg {
                            background: linear-gradient(120deg, #007bff 0%, #ff8c00 100%);
                            border-radius: 1.5rem;
                            box-shadow: 0 8px 32px rgba(0, 123, 255, 0.10);
                            color: #fff;
                            text-align: center;
                            position: relative;
                            z-index: 1;
                        }
                        .team-header-shape-1, .team-header-shape-2 {
                            position: absolute;
                            border-radius: 50%;
                            z-index: 0;
                            opacity: 0.18;
                        }
                        .team-header-shape-1 {
                            top: -35px;
                            left: -45px;
                            width: 110px;
                            height: 110px;
                            background: #fff;
                            animation: float1 7s ease-in-out infinite;
                        }
                        .team-header-shape-2 {
                            bottom: -35px;
                            right: -45px;
                            width: 90px;
                            height: 90px;
                            background: #fff;
                            animation: float2 8s ease-in-out infinite;
                        }
                        @keyframes float1 {
                            0%,100% { transform: translateY(0);}
                            50% { transform: translateY(18px);}
                        }
                        @keyframes float2 {
                            0%,100% { transform: translateY(0);}
                            50% { transform: translateY(-14px);}
                        }
                        .animated-team-title {
                            font-weight: 700;
                            letter-spacing: 2px;
                            text-shadow: 0 2px 8px rgba(0,123,255,0.18);
                            animation: fadeInDown 1.1s cubic-bezier(.77,0,.18,1) both;
                        }
                        .team-header-desc {
                            font-size: 1.3rem;
                            font-weight: 500;
                            color: #fff;
                            position: relative;
                            z-index: 1;
                            animation: fadeInUp 1.1s cubic-bezier(.77,0,.18,1) 0.2s both;
                        }
                        @keyframes fadeInDown {
                            0% { opacity: 0; transform: translateY(-40px);}
                            100% { opacity: 1; transform: translateY(0);}
                        }
                        @keyframes fadeInUp {
                            0% { opacity: 0; transform: translateY(40px);}
                            100% { opacity: 1; transform: translateY(0);}
                        }
                    </style>
                </div>
                <div class="row g-4">
                    {% for membre in equipe %}
                    <div class="col-md-6 col-lg-6 col-xl-3 wow fadeInUp" data-wow-delay="{{ forloop.counter0|add:2|floatformat:1 }}s">
                        <div class="team-item">
                            <div class="team-img">
                                {% if membre.photo %}
                                    <img src="{{ membre.photo.url }}" class="img-fluid" alt="{{ membre.prenom }} {{ membre.nom }}">
                                {% else %}
                                    <img src="{% static 'web_site/img/default-user.png' %}" class="img-fluid" alt="Photo par défaut">
                                {% endif %}
                            </div>
                            <div class="team-title">
                                <h4 class="mb-0">{{ membre.prenom }} {{ membre.nom }}</h4>
                                <p class="mb-0">{{ membre.poste }}</p>
                            </div>
                            <div class="team-icon">
                                {% if membre.email %}<a class="btn btn-primary btn-sm-square rounded-circle me-3" href="mailto:{{ membre.email }}"><i class="fas fa-envelope"></i></a>{% endif %}
                                {% if membre.telephone %}<a class="btn btn-primary btn-sm-square rounded-circle me-3" href="tel:{{ membre.telephone }}"><i class="fas fa-phone"></i></a>{% endif %}
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
        <!-- Team End -->

        {% include 'web_site/footer.html' %}

        <!-- Back to Top -->
        <a href="#" class="btn btn-primary btn-lg-square rounded-circle back-to-top"><i class="fa fa-arrow-up"></i></a>

        <!-- JavaScript Libraries -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
        <script src="{% static 'web_site/lib/wow/wow.min.js' %}"></script>
        <script src="{% static 'web_site/lib/easing/easing.min.js' %}"></script>
        <script src="{% static 'web_site/lib/waypoints/waypoints.min.js' %}"></script>
        <script src="{% static 'web_site/lib/counterup/counterup.min.js' %}"></script>
        <script src="{% static 'web_site/lib/lightbox/js/lightbox.min.js' %}"></script>
        <script src="{% static 'web_site/lib/owlcarousel/owl.carousel.min.js' %}"></script>

        <!-- Template Javascript -->
        <script src="{% static 'web_site/js/main.js' %}"></script>
        <script>
document.addEventListener('DOMContentLoaded', function() {
    document.querySelectorAll('.voir-plus-link').forEach(function(link) {
        link.addEventListener('click', function(e) {
            e.preventDefault();
            var rest = this.parentElement.querySelector('.model-desc-rest');
            if (!rest) return;
            if (rest.classList.contains('d-none')) {
                rest.classList.remove('d-none');
                this.textContent = 'voir moins';
            } else {
                rest.classList.add('d-none');
                this.textContent = 'voir plus';
            }
        });
    });
});
</script>
    </body>

</html>